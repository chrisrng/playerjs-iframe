!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("playerjs-iframe",[],t):"object"==typeof exports?exports["playerjs-iframe"]=t():e["playerjs-iframe"]=t()}(this,function(){return function(e){function t(s){if(n[s])return n[s].exports;var o=n[s]={exports:{},id:s,loaded:!1};return e[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(this.Adapter=l["default"][e.adapter],!this.Adapter)throw new Error("no adapter for "+e.adapter);this.config=e,this.messenger=new a["default"]({context:c["default"].CONTEXT})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=s(i),u=n(2),a=s(u),d=n(5),l=s(d),f=n(4),c=s(f);t["default"]=o,o.addAdapter=function(e,t){l["default"][e]=t},o.Thenable=r["default"],Object.keys(c["default"]).forEach(function(e){o[e]=c["default"][e]}),console.log("PlayerjsIframe",o),o.prototype.load=function(){var e=this.messenger,t=new this.Adapter(this.config,this.messenger);return new r["default"](function(n,s){t.load().then(function(t){(t.support&&t.support.methods||[]).forEach(function(n){e.on(n,function(e,s){t[n](s)})}),t.support&&t.support.events&&(t.support.methods=(t.support.methods||[]).concat([c["default"].METHODS.ADDEVENTLISTENER,c["default"].METHODS.REMOVEEVENTLISTENER])),e.emit({event:c["default"].EVENTS.READY,value:{src:window.location.href,events:t.support&&t.support.events,methods:t.support&&t.support.methods}}),n(t)})})},e.exports=t["default"]},function(e,t){"use strict";function n(e){function t(e,t){this.state||(this.state=e,this.data=t,this.callbacks.forEach(s.bind(this)),this.callbacks=[])}this.callbacks=[],this.state,this.data,e(t.bind(this,"fulfill"),t.bind(this,"reject"))}function s(e){this.state?e[this.state]&&e[this.state](this.data):this.callbacks.push(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.prototype.then=function(e,t){s.call(this,{fulfill:e,reject:t})},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){this.config=e||{},this.listeners={},this.on(l["default"].METHODS.ADDEVENTLISTENER,function(e,t){a["default"].log("[messenger#addEventListener]",t),-1===r(this.listeners[t.value],t.listener)&&(this.listeners[t.value]=(this.listeners[t.value]||[]).concat(t.listener))}.bind(this)),this.on(l["default"].METHODS.REMOVEEVENTLISTENER,function(e,t){a["default"].log("[messenger#removeEventListener]",t);var n=r(this.listeners[t.value],t.listener);-1!==n&&(this.listeners[t.value]=this.listeners[t.value].splice(n,1))})}function i(e){window.parent.postMessage(JSON.stringify(e),"*")}function r(e,t){return e&&t?e.indexOf(t):-1}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),a=s(u),d=n(4),l=s(d);t["default"]=o,o.prototype.emit=function(e){if("string"==typeof e&&(e={event:e}),e=Object.keys(this.config).reduce(function(e,t){return e.hasOwnProperty(t)||(e[t]=this.config[t]),e}.bind(this),e||{}),e.event===l["default"].EVENTS.READY)i(e);else{var t=e.listener?[e.listener]:this.listeners[e.event]||[];t.forEach(function(t){e.listener=t,a["default"].log("[messenger#emit]",e),i(e)}.bind(this))}return this},o.prototype.on=function(e,t){return window.addEventListener("message",function(n){try{var s=JSON.parse(n.data);this.config.context&&s.context!==this.config.context||s.method===e&&t&&t(s.value,s)}catch(o){}}.bind(this)),this},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={log:function(){window.DEBUG&&window.console&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={CONTEXT:"player.js",EVENTS:{READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},METHODS:{PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"}},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=s(o);t["default"]={youtube:i["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){this.config=e,this.messenger=t}function i(e,t,n){var s=document.createElement("div");document.body.appendChild(s),this.messenger=t,this.listeners={},this.support={events:["play","paused","ended","error"],methods:["play","pause","addEventListener","getDuration","setCurrentTime"]},this.player=new YT.Player(s,{height:"100%",width:"100%",videoId:e.videoId,events:{onReady:function(){n(this)}.bind(this),onError:function(){this.messenger.emit({event:d["default"].EVENTS.ERROR,value:{code:-1,msg:"something went wrong"}})}.bind(this),onStateChange:function(e){var t={0:d["default"].EVENTS.ENDED,1:d["default"].EVENTS.PLAY,2:d["default"].EVENTS.PAUSE};t[e.data]&&this.messenger.emit(t[e.data])}.bind(this)}})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),u=s(r),a=n(4),d=s(a);t["default"]=o,o.prototype.load=function(){function e(){if(!window.YT||!window.YT.Player){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",(document.head||document.body).appendChild(e)}}var t=this.config,n=this.messenger;return e(),new u["default"](function(e,s){window.onYouTubeIframeAPIReady=function(){new i(t,n,e)}})},i.prototype.play=function(){this.player.playVideo()},i.prototype.pause=function(){this.player.pauseVideo()},i.prototype.getDuration=function(e){e.value=this.player.getDuration(),this.messenger.emit(e)},i.prototype.setCurrentTime=function(e){this.player.seekTo(e.value)},e.exports=t["default"]}])});