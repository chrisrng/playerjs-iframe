!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("playerjs-iframe",[],t):"object"==typeof exports?exports["playerjs-iframe"]=t():e["playerjs-iframe"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(this.Adapter=d["default"][e.adapter],!this.Adapter)throw new Error("no adapter for "+e.adapter);this.config=e,this.messenger=new s["default"]({context:p["default"].CONTEXT})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=o(a),i=n(2),s=o(i),l=n(5),d=o(l),f=n(4),p=o(f);t["default"]=r,r.addAdapter=function(e,t){d["default"][e]=t},r.Thenable=u["default"],Object.keys(p["default"]).forEach(function(e){r[e]=p["default"][e]}),r.prototype.load=function(){var e=this.messenger,t=new this.Adapter(this.config,this.messenger);return new u["default"](function(n,o){t.load().then(function(t){(t.support&&t.support.methods||[]).forEach(function(n){e.on(n,function(e,o){t[n](o)})}),t.support&&t.support.events&&(t.support.methods=(t.support.methods||[]).concat([p["default"].METHODS.ADDEVENTLISTENER,p["default"].METHODS.REMOVEEVENTLISTENER])),e.emit({event:p["default"].EVENTS.READY,value:{src:window.location.href,events:t.support&&t.support.events,methods:t.support&&t.support.methods}}),n(t)})})},e.exports=t["default"]},function(e,t){"use strict";function n(e){function t(e,t){this.state||(this.state=e,this.data=t,this.callbacks.forEach(o.bind(this)),this.callbacks=[])}this.callbacks=[],this.state,this.data,e(t.bind(this,"fulfill"),t.bind(this,"reject"))}function o(e){this.state?e[this.state]&&e[this.state](this.data):this.callbacks.push(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.prototype.then=function(e,t){o.call(this,{fulfill:e,reject:t})},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=this;this.config=e||{},this.listeners={},this.on(d["default"].METHODS.ADDEVENTLISTENER,function(e,n){s["default"].log("[messenger#addEventListener]",n),-1===u(t.listeners[n.value],n.listener)&&(t.listeners[n.value]=(t.listeners[n.value]||[]).concat(n.listener))}),this.on(d["default"].METHODS.REMOVEEVENTLISTENER,function(e,n){s["default"].log("[messenger#removeEventListener]",n);var o=u(t.listeners[n.value],n.listener);-1!==o&&(t.listeners[n.value]=t.listeners[n.value].splice(o,1))})}function a(e){window.parent.postMessage(JSON.stringify(e),"*")}function u(e,t){return e&&t?e.indexOf(t):-1}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),l=n(4),d=o(l);t["default"]=r,r.prototype.emit=function(e){var t=this;if("string"==typeof e&&(e={event:e}),e=Object.keys(this.config).reduce(function(e,n){return e.hasOwnProperty(n)||(e[n]=t.config[n]),e},e||{}),e.event===d["default"].EVENTS.READY)a(e);else{var n=e.listener?[e.listener]:this.listeners[e.event]||[];n.forEach(function(t){e.listener=t,s["default"].log("[messenger#emit]",e),a(e)})}return this},r.prototype.on=function(e,t){var n=this;return window.addEventListener("message",function(o){try{var r=JSON.parse(o.data);n.config.context&&r.context!==n.config.context||r.method===e&&t&&t(r.value,r)}catch(a){}}),this},r.prototype.returns=function(e,t){e.value=t,e.event=e.method||e.event,delete e.method,this.emit(e)},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={log:function(){window.DEBUG&&window.console&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={CONTEXT:"player.js",EVENTS:{READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},METHODS:{PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"}},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),a=o(r),u=n(8),i=o(u);t["default"]={youtube:a["default"],vimeo:i["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){this.config=e,this.messenger=t}function a(e,t,n){var o=this,r=document.createElement("div");document.body.appendChild(r),this.messenger=t,this.listeners={},this.support={events:["play","paused","ended","error"],methods:["play","pause","getDuration","setCurrentTime"]},this.player=new YT.Player(r,{height:"100%",width:"100%",videoId:e.videoId,events:{onReady:function(){c["default"].log("[youtube#event:ready]"),n(o)},onError:function(){c["default"].log("[youtube#event:error]"),o.messenger.emit({event:l["default"].EVENTS.ERROR,value:{code:-1,msg:"something went wrong"}})},onStateChange:function(e){var t={0:l["default"].EVENTS.ENDED,1:l["default"].EVENTS.PLAY,2:l["default"].EVENTS.PAUSE};t[e.data]&&(c["default"].log("[youtube#event:%s]",t[e.data]),o.messenger.emit(t[e.data]))}}})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=o(u),s=n(4),l=o(s),d=n(7),f=o(d),p=n(3),c=o(p);t["default"]=r,r.prototype.load=function(){var e=this.config,t=this.messenger;return new i["default"](function(n,o){window.onYouTubeIframeAPIReady=function(){new a(e,t,n)},(0,f["default"])("https://www.youtube.com/iframe_api")})},a.prototype.play=function(){c["default"].log("[youtube#method:play]"),this.player.playVideo()},a.prototype.pause=function(){c["default"].log("[youtube#method:pause]"),this.player.pauseVideo()},a.prototype.getDuration=function(e){var t=this.player.getDuration();c["default"].log("[youtube#method:getDuration]",t),this.messenger.returns(e,t)},a.prototype.setCurrentTime=function(e){c["default"].log("[youtube#method:setCurrentTime]",e.value),this.player.seekTo(e.value)},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){return new u["default"](function(t,n){var o=document.createElement("script");o.async=!0,(document.head||document.body).appendChild(o),o.onload=o.onreadystatechange=function(e,r){(r||!o.readyState||/loaded|complete/.test(o.readyState))&&(o.onload=o.onreadystatechange=null,o=void 0,r?n():t())},o.src=e})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(1),u=o(a);e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){this.config=e,this.messenger=t}function a(e,t,n){var o=this;this.messenger=t,this.support={events:["play","paused","ended"],methods:["play","pause","getDuration","setCurrentTime"]};var r=new E["default"]("https://player.vimeo.com/video/"+e.videoId+"?api=1");r.appendTo(document.body),this.player=$f(r.iframe),this.player.addEvent("ready",function(){c["default"].log("[vimeo#event:ready]"),o.player.addEvent("play",function(){c["default"].log("[vimeo#event:play]"),o.messenger.emit(l["default"].EVENTS.PLAY)}),o.player.addEvent("pause",function(){c["default"].log("[vimeo#event:pause]"),o.messenger.emit(l["default"].EVENTS.PAUSE)}),n(o)})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),i=o(u),s=n(4),l=o(s),d=n(7),f=o(d),p=n(3),c=o(p),h=n(9),E=o(h);t["default"]=r,r.prototype.load=function(){var e=this.config,t=this.messenger;return new i["default"](function(n,o){(0,f["default"])("//f.vimeocdn.com/js/froogaloop2.min.js").then(function(){new a(e,t,n)})})},a.prototype.play=function(){c["default"].log("[vimeo#method:play]"),this.player.api("play")},a.prototype.pause=function(){c["default"].log("[vimeo#method:pause]"),this.player.api("pause")},a.prototype.getDuration=function(e){var t=this;this.player.api("getDuration",function(n){c["default"].log("[vimeo#method:getDuration]",n),t.messenger.returns(e,n)})},a.prototype.setCurrentTime=function(e){c["default"].log("[vimeo#method:setCurrentTime]",e.value),this.player.api("seekTo",e.value)},e.exports=t["default"]},function(e,t){"use strict";function n(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r={width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowfullscreen:"1"};n=o({},r,n),this.iframe=document.createElement("iframe"),Object.keys(n).forEach(function(e){t.iframe.setAttribute(e,n[e])}),this.iframe.src=e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t["default"]=n,n.prototype.appendTo=function(e){e&&e.appendChild(this.iframe)},e.exports=t["default"]}])});